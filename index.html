<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fullscreen Blurred Carousel Background</title>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        font-family: Arial, sans-serif;
        overflow: hidden;
        position: relative;
      }

      /* Fullscreen blurred background */
      .fullscreen-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        filter: blur(20px);
        z-index: 0;
        transition: background-image 0.5s ease;
      }

      /* Carousel wrapper */
      .carousel-wrapper {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        position: relative;
        z-index: 1; /* Above the blurred background */
        height: 100%;
      }

      .carousel-container {
        width: 800px;
        overflow: hidden;
        border-radius: 10px;
        position: relative;
        background-color: rgba(
          255,
          255,
          255,
          0.1
        ); /* slight overlay if needed */
        padding: 20px 0;
        box-sizing: border-box;
      }

      .carousel-track {
        display: flex;
        transition: transform 0.5s ease;
      }

      .card {
        flex: 0 0 calc(25% - 10px);
        margin: 0 5px;
        height: 250px;
        border-radius: 10px;
        overflow: hidden;
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .card:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .card img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 10px;
        display: block;
      }

      .arrow {
        background-color: #333;
        color: #fff;
        border: none;
        padding: 15px;
        cursor: pointer;
        border-radius: 50%;
        font-size: 20px;
        z-index: 2;
      }

      /* Responsive */
      @media (max-width: 800px) {
        .card {
          flex: 0 0 calc(50% - 10px);
        }
      }
      @media (max-width: 500px) {
        .card {
          flex: 0 0 calc(100% - 10px);
        }
      }
    </style>
  </head>
  <body>
    <!-- Fullscreen blurred background -->
    <div class="fullscreen-bg" id="fullscreen-bg"></div>

    <!-- Carousel -->
    <div class="carousel-wrapper">
      <button class="arrow arrow-left">&#8592;</button>
      <div class="carousel-container">
        <div class="carousel-track">
          <div class="card"><img src="img1.jpeg" alt="1" /></div>
          <div class="card"><img src="img2.jpeg" alt="2" /></div>
          <div class="card"><img src="img3.jpeg" alt="3" /></div>
          <div class="card"><img src="img4.jpeg" alt="4" /></div>
          <div class="card"><img src="img5.jpeg" alt="5" /></div>
          <div class="card"><img src="img6.jpeg" alt="6" /></div>
          <div class="card"><img src="img7.jpeg" alt="7" /></div>
          <div class="card"><img src="img8.jpeg" alt="8" /></div>
        </div>
      </div>
      <button class="arrow arrow-right">&#8594;</button>
    </div>

    <script>
      const track = document.querySelector(".carousel-track");
      const cards = document.querySelectorAll(".card img");
      const leftArrow = document.querySelector(".arrow-left");
      const rightArrow = document.querySelector(".arrow-right");
      const fullscreenBg = document.getElementById("fullscreen-bg");

      const container = document.querySelector(".carousel-container");
      const visibleCards = 4; // number of visible cards
      let index = 0;

      // Clone first few cards and append to track for infinite effect
      const trackCards = document.querySelectorAll(".card");
      for (let i = 0; i < visibleCards; i++) {
        const clone = trackCards[i].cloneNode(true);
        track.appendChild(clone);
      }

      const cardStyle = getComputedStyle(cards[0].parentElement);
      const cardWidth =
        cards[0].parentElement.offsetWidth +
        parseInt(cardStyle.marginLeft) +
        parseInt(cardStyle.marginRight);

      // Set initial background
      fullscreenBg.style.backgroundImage = `url('${cards[0].src}')`;

      function updateBackground() {
        const realIndex = index % cards.length; // loop index
        fullscreenBg.style.backgroundImage = `url('${cards[realIndex].src}')`;
      }

      function moveCarousel() {
        track.style.transition = "transform 0.5s ease";
        track.style.transform = `translateX(-${index * cardWidth}px)`;
        updateBackground();
      }

      rightArrow.addEventListener("click", () => {
        index++;
        moveCarousel();

        // Reset to start seamlessly
        if (index >= cards.length) {
          setTimeout(() => {
            track.style.transition = "none";
            index = 0;
            track.style.transform = `translateX(-${index * cardWidth}px)`;
          }, 500);
        }
      });

      leftArrow.addEventListener("click", () => {
        if (index === 0) {
          index = cards.length;
          track.style.transition = "none";
          track.style.transform = `translateX(-${index * cardWidth}px)`;
          setTimeout(() => {
            index--;
            track.style.transition = "transform 0.5s ease";
            moveCarousel();
          }, 50);
        } else {
          index--;
          moveCarousel();
        }
      });
    </script>
  </body>
</html>
